!function(){"use strict";class e{constructor(e,t){this._inputSelector=e.inputSelector,this._formSelector=e.formSelector,this._submitButtonSelector=e.submitButtonSelector,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t,this._inputElements=Array.from(this._form.querySelectorAll(this._inputSelector)),this._submitButton=this._form.querySelector(this._submitButtonSelector)}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}resetValidation(){this._toggleButtonState(),this._inputElements.forEach((e=>{this._hideInputError(e)}))}_disableButton(){this._submitButton.disabled=!0}_toggleButtonState(){this._hasInvalidInput()?this._disableButton():this._submitButton.disabled=!1}_hasInvalidInput(){return!this._inputElements.every((e=>e.validity.valid))}_setEventListeners(){this._form.addEventListener("submit",(e=>{e.preventDefault(),this._disableButton()})),this._inputElements.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._setEventListeners()}}class t{constructor(e,t,s){this._name=e.name,this._image=e.link,this._cardSelector=t,this._handleImageClick=s}_setEventListeners(){this._cardImage.addEventListener("click",(()=>{this._handleImageClick(this)})),this._likeButton.addEventListener("click",(()=>{this._likeButton.classList.toggle("card__heart-button_clicked")})),this._deleteButton.addEventListener("click",(()=>{this._element.remove()}))}generateCard(){return this._element=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._likeButton=this._element.querySelector(".card__heart-button"),this._cardImage=this._element.querySelector(".card__image"),this._cardTitle=this._element.querySelector(".card__title"),this._deleteButton=this._element.querySelector(".card__delete-button"),this._cardImage.src=this._image,this._cardImage.alt=this._name,this._cardTitle.textContent=this._name,this._setEventListeners(),this._element}}class s{constructor(e){let{modalSelector:t}=e;this._modalElement=document.querySelector(t),this._closeButton=this._modalElement.querySelector(".modal__close"),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._modalElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._modalElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}_closeModalOverlay=e=>{e.target===e.currentTarget&&this.close()};setEventListeners(){this._modalElement.addEventListener("mousedown",(e=>this._closeModalOverlay(e))),this._closeButton.addEventListener("click",(()=>this.close()))}}class o extends s{constructor(e,t){super({modalSelector:e}),this.modalForm=this._modalElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._inputElements=Array.from(this.modalForm.querySelectorAll(".modal__input"))}_getInputValues(){const e={};return this._inputElements.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this.modalForm.addEventListener("submit",(()=>this._handleFormSubmit(this._getInputValues())))}}document.querySelector(".cards__list");const n=document.forms["edit-profile-form"],r=document.forms["add-card-form"],i=document.querySelector(".profile__edit-button"),l=document.querySelector(".profile__add-button"),a=(document.querySelector(".profile__name"),document.querySelector(".profile__job"),document.querySelector("[name='name'")),m=document.querySelector("[name='job']"),c={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-button",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},d=new e(c,n);d.enableValidation(),new e(c,r).enableValidation();const h=new class{constructor(e,t){let{items:s,renderer:o}=e;this._renderedItems=s,this._renderer=o,this._container=document.querySelector(t)}renderItems(){this._renderedItems.forEach((e=>{this._renderer(e)}))}appendItem(e){this._container.append(e)}prependItem(e){this._container.prepend(e)}}({items:[{name:"Joshua Tree",link:"https://images.unsplash.com/photo-1596625820723-f0f481ff80be?w=700&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8am9zaHVhJTIwdHJlZXxlbnwwfHwwfHx8MA%3D%3D"},{name:"Emigrant Wilderness",link:"https://images.unsplash.com/photo-1446575983799-470c50cfdd25?w=700&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTF8fGVtaWdyYW50JTIwd2lsZGVybmVzc3xlbnwwfHwwfHx8MA%3D%3D"},{name:"Redwood National Forest",link:"https://images.unsplash.com/photo-1698410531000-bdbb42dc388e?w=700&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTF8fHJlZHdvb2QlMjBuYXRpb25hbCUyMGZvcmVzdHxlbnwwfHwwfHx8MA%3D%3D"},{name:"Marin Headlands",link:"https://images.unsplash.com/photo-1536687485033-90afd5b75fb8?w=700&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTV8fG1hcmluJTIwaGVhZGxhbmRzfGVufDB8fDB8fHww"},{name:"Trinity Alps",link:"https://images.unsplash.com/photo-1648847672613-ca4f0351acae?w=700&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTF8fHRyaW5pdHklMjBhbHBzfGVufDB8fDB8fHww"},{name:"Goat Rock Beach",link:"https://images.unsplash.com/photo-1578422212025-0e64506a0be9?w=700&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8Z29hdCUyMHJvY2slMjBiZWFjaHxlbnwwfHwwfHx8MA%3D%3D"}],renderer:e=>{h.appendItem(b(e))}},".cards__list");h.renderItems();const u=new o("#edit-modal",(function(e){console.log(e.name),f.setUserInfo({nameInput:e.name,jobInput:e.job}),u.close()}));u.setEventListeners();const _=new o("#add-card-modal",(function(e){const t={name:e.title,link:e.url};h.prependItem(b(t)),_.close(),_.modalForm.reset()}));_.setEventListeners();const p=new class extends s{constructor(e){super({modalSelector:e}),this._modalImage=this._modalElement.querySelector(".modal__image-preview"),this._modalImageSubtitle=this._modalElement.querySelector(".modal__picture-subtitle")}open(e){this._modalImage.src=e.link,this._modalImage.alt=`Photo of ${e.name}`,this._modalImageSubtitle.textContent=e.name,super.open()}}("#preview-image-modal");p.setEventListeners();const f=new class{constructor(e){let{nameElementSelector:t,jobElementSelector:s}=e;this._nameElement=document.querySelector(t),this._jobElement=document.querySelector(s)}getUserInfo(){return this._userInfo={name:this._nameElement.textContent,job:this._jobElement.textContent},this._userInfo}setUserInfo(e){let{nameInput:t,jobInput:s}=e;this._nameElement.textContent=t,this._jobElement.textContent=s}}({nameElementSelector:".profile__name",jobElementSelector:".profile__job"});function b(e){return new t(e,"#card-template",(()=>{p.open(e)})).generateCard()}i.addEventListener("click",(()=>{const e=f.getUserInfo();a.value=e.name,m.value=e.job,u.open(),d.resetValidation()})),l.addEventListener("click",(()=>{_.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q2J3QixFQUFxQmpFLGlCQUFpQixJQUd4QzhELEVBQWlCdEQsaUJBQWlCLFNBQVMsS0FDekMrRSxFQUFVOUMsTUFBTSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL01vZGFsLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL01vZGFsV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL01vZGFsV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3RvcihvcHRpb25zLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBvcHRpb25zLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gb3B0aW9ucy5mb3JtU2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBvcHRpb25zLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IG9wdGlvbnMuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBvcHRpb25zLmVycm9yQ2xhc3M7XG5cbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XG5cbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKVxuICAgICk7XG5cbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JNZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG5cbiAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICB9XG5cbiAgLy9hZGQgYSByZXNldCBWYWxpZGF0aW9uIGZ1bmN0aW9uLi4uXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpOyAvLyBjb250cm9sbGluZyB0aGUgc3VibWl0IGJ1dHRvbiA9PVxuXG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSk7XG4gIH1cblxuICBfZGlzYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICB9XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgfVxuXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuICF0aGlzLl9pbnB1dEVsZW1lbnRzLmV2ZXJ5KFxuICAgICAgKGlucHV0RWxlbWVudCkgPT4gaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkXG4gICAgKTtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIHRoaXMuX2Rpc2FibGVCdXR0b24oKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChldnQpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKGRhdGEsIGNhcmRTZWxlY3RvciwgaGFuZGxlSW1hZ2VDbGljaykge1xuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5faW1hZ2UgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh0aGlzKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2hlYXJ0LWJ1dHRvbl9jbGlja2VkXCIpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgZ2VuZXJhdGVDYXJkKCkge1xuICAgIHRoaXMuX2VsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faGVhcnQtYnV0dG9uXCIpO1xuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgICB0aGlzLl9jYXJkVGl0bGUgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIik7XG5cbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5faW1hZ2U7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fY2FyZFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIE1vZGFsIHtcbiAgY29uc3RydWN0b3IoeyBtb2RhbFNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9tb2RhbEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG1vZGFsU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Nsb3NlQnV0dG9uID0gdGhpcy5fbW9kYWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fbW9kYWxFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fbW9kYWxFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgX2Nsb3NlTW9kYWxPdmVybGF5ID0gKGV2dCkgPT4ge1xuICAgIGlmIChldnQudGFyZ2V0ID09PSBldnQuY3VycmVudFRhcmdldCkge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgLy90aGlzIG5lZWRzIHRvIGJlIGFuIGFycm93IGZ1bmN0aW9uIGJjIGl0IHVzZXMgdGhpcy4uLnJlYWQgbWF4J3MgYXJ0aWNsZS4uLlxuICAgIH1cbiAgfTtcblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9tb2RhbEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZXZ0KSA9PlxuICAgICAgdGhpcy5fY2xvc2VNb2RhbE92ZXJsYXkoZXZ0KVxuICAgICk7XG5cbiAgICB0aGlzLl9jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5jbG9zZSgpKTtcbiAgfVxufVxuIiwiaW1wb3J0IE1vZGFsIGZyb20gXCIuL01vZGFsLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1vZGFsV2l0aEZvcm0gZXh0ZW5kcyBNb2RhbCB7XG4gIGNvbnN0cnVjdG9yKG1vZGFsU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcbiAgICBzdXBlcih7IG1vZGFsU2VsZWN0b3IgfSk7XG4gICAgdGhpcy5tb2RhbEZvcm0gPSB0aGlzLl9tb2RhbEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMubW9kYWxGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpXG4gICAgKTtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLm1vZGFsRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsICgpID0+XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpXG4gICAgKTtcbiAgfVxufVxuIiwiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiSm9zaHVhIFRyZWVcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTk2NjI1ODIwNzIzLWYwZjQ4MWZmODBiZT93PTcwMCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZxPTYwJml4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4elpXRnlZMmg4TTN4OGFtOXphSFZoSlRJd2RISmxaWHhsYm53d2ZId3dmSHg4TUElM0QlM0RcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiRW1pZ3JhbnQgV2lsZGVybmVzc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE0NDY1NzU5ODM3OTktNDcwYzUwY2ZkZDI1P3c9NzAwJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnE9NjAmaXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh6WldGeVkyaDhNVEY4ZkdWdGFXZHlZVzUwSlRJd2QybHNaR1Z5Ym1WemMzeGxibnd3Zkh3d2ZIeDhNQSUzRCUzRFwiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJSZWR3b29kIE5hdGlvbmFsIEZvcmVzdFwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE2OTg0MTA1MzEwMDAtYmRiYjQyZGMzODhlP3c9NzAwJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnE9NjAmaXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh6WldGeVkyaDhNVEY4ZkhKbFpIZHZiMlFsTWpCdVlYUnBiMjVoYkNVeU1HWnZjbVZ6ZEh4bGJud3dmSHd3Zkh4OE1BJTNEJTNEXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIk1hcmluIEhlYWRsYW5kc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1MzY2ODc0ODUwMzMtOTBhZmQ1Yjc1ZmI4P3c9NzAwJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnE9NjAmaXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh6WldGeVkyaDhNVFY4ZkcxaGNtbHVKVEl3YUdWaFpHeGhibVJ6ZkdWdWZEQjhmREI4Zkh3d1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJUcmluaXR5IEFscHNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNjQ4ODQ3NjcyNjEzLWNhNGYwMzUxYWNhZT93PTcwMCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZxPTYwJml4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4elpXRnlZMmg4TVRGOGZIUnlhVzVwZEhrbE1qQmhiSEJ6ZkdWdWZEQjhmREI4Zkh3d1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJHb2F0IFJvY2sgQmVhY2hcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTc4NDIyMjEyMDI1LTBlNjQ1MDZhMGJlOT93PTcwMCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZxPTYwJml4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4elpXRnlZMmg4TTN4OFoyOWhkQ1V5TUhKdlkyc2xNakJpWldGamFIeGxibnd3Zkh3d2ZIeDhNQSUzRCUzRFwiLFxuICB9LFxuXTtcblxuLy9XcmFwcGVyczpcbmV4cG9ydCBjb25zdCBjYXJkTGlzdEVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlRm9ybUVsZW1lbnQgPSBkb2N1bWVudC5mb3Jtc1tcImVkaXQtcHJvZmlsZS1mb3JtXCJdO1xuZXhwb3J0IGNvbnN0IGFkZENhcmRGb3JtRWxlbWVudCA9IGRvY3VtZW50LmZvcm1zW1wiYWRkLWNhcmQtZm9ybVwiXTtcblxuLy9cbi8vQnV0dG9ucyBhbmQgTm9kZXM6XG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiXG4pO1xuZXhwb3J0IGNvbnN0IGFkZE5ld0NhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZUpvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fam9iXCIpO1xuXG4vL0Zvcm0gRGF0YTpcbmV4cG9ydCBjb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiW25hbWU9J25hbWUnXCIpO1xuZXhwb3J0IGNvbnN0IGpvYklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIltuYW1lPSdqb2InXVwiKTtcblxuLy9TZWxlY3RvcnMgYW5kIENsYXNzZXM6XG5leHBvcnQgY29uc3Qgb3B0aW9ucyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zdWJtaXQtYnV0dG9uXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXG59O1xuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBNb2RhbFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL01vZGFsV2l0aEZvcm0uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IE1vZGFsV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL01vZGFsV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQge1xuICBjYXJkTGlzdEVsLFxuICBwcm9maWxlRm9ybUVsZW1lbnQsXG4gIGFkZENhcmRGb3JtRWxlbWVudCxcbiAgcHJvZmlsZUVkaXRCdXR0b24sXG4gIGFkZE5ld0NhcmRCdXR0b24sXG4gIHByb2ZpbGVOYW1lLFxuICBwcm9maWxlSm9iLFxuICBuYW1lSW5wdXQsXG4gIGpvYklucHV0LFxuICBvcHRpb25zLFxuICBpbml0aWFsQ2FyZHMsXG59IGZyb20gXCIuLi9jb21wb25lbnRzL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG4vL1ZBTElEQVRJT04gSU5TVEFOVElBVElPTjpcblxuY29uc3QgcHJvZmlsZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihvcHRpb25zLCBwcm9maWxlRm9ybUVsZW1lbnQpO1xucHJvZmlsZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuLy91c2UgcHJvZmlsZU1vZGFsLm1vZGFsRm9ybSBoZXJlIGluIG9yZGVyIHRvIG5vdCBzZWFyY2ggdGhlIGZvcm0/XG4vL2NvbnN0IHByb2ZpbGVGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Iob3B0aW9ucywgcHJvZmlsZU1vZGFsLm1vZGFsRm9ybSk7XG4vL3RyaWVkIGFib3ZlIGFuZCBpdCBkaWQgbm90IHdvcmsuLi5zdGlsbCBuZWVkIHRvIHRyb3VibGVzaG9vdC5cbi8vc2FtZSBmb3IgYmVsb3c6XG5cbmNvbnN0IGFkZENhcmRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Iob3B0aW9ucywgYWRkQ2FyZEZvcm1FbGVtZW50KTtcbmFkZENhcmRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuLy9TRUNUSU9OIENMQVNTIElOU1RBTlRJQVRJT046XG5jb25zdCBjYXJkc1NlY3Rpb24gPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gICAgcmVuZGVyZXI6IChjYXJkRGF0YSkgPT4ge1xuICAgICAgY2FyZHNTZWN0aW9uLmFwcGVuZEl0ZW0oY3JlYXRlQ2FyZChjYXJkRGF0YSkpO1xuICAgIH0sXG4gIH0sXG4gIFwiLmNhcmRzX19saXN0XCJcbik7XG5jYXJkc1NlY3Rpb24ucmVuZGVySXRlbXMoKTtcblxuLy9QUk9GSUxFIE1PREFMIElOU1RBTlRJQVRJT046XG5jb25zdCBwcm9maWxlTW9kYWwgPSBuZXcgTW9kYWxXaXRoRm9ybShcIiNlZGl0LW1vZGFsXCIsIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KTtcbnByb2ZpbGVNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vL05FVyBDQVJEIE1PREFMIElOU1RBTlRJQVRJT046XG5jb25zdCBjYXJkTW9kYWwgPSBuZXcgTW9kYWxXaXRoRm9ybShcIiNhZGQtY2FyZC1tb2RhbFwiLCBoYW5kbGVBZGRDYXJkRm9ybVN1Ym1pdCk7XG5jYXJkTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy9NT0RBTCBXSVRIIElNQUdFIElOU1RBTlRJQVRJT046XG5jb25zdCBpbWFnZVByZXZpZXdNb2RhbCA9IG5ldyBNb2RhbFdpdGhJbWFnZShcIiNwcmV2aWV3LWltYWdlLW1vZGFsXCIpO1xuaW1hZ2VQcmV2aWV3TW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy9VU0VSIElORk8gSU5TVEFOU1RJQVRJT046XG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIG5hbWVFbGVtZW50U2VsZWN0b3I6IFwiLnByb2ZpbGVfX25hbWVcIixcbiAgam9iRWxlbWVudFNlbGVjdG9yOiBcIi5wcm9maWxlX19qb2JcIixcbn0pO1xuXG4vL0VWRU5UIExJU1RFTkVSUyBGT1IgTU9EQUwgQlVUVE9OUzpcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNvbnN0IGN1cnJlbnRVc2VyID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgbmFtZUlucHV0LnZhbHVlID0gY3VycmVudFVzZXIubmFtZTtcbiAgam9iSW5wdXQudmFsdWUgPSBjdXJyZW50VXNlci5qb2I7XG5cbiAgcHJvZmlsZU1vZGFsLm9wZW4oKTtcbiAgcHJvZmlsZUZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG59KTtcblxuYWRkTmV3Q2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjYXJkTW9kYWwub3BlbigpO1xufSk7XG5cbi8vRlVOQ1RJT05TOlxuXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGNhcmREYXRhKSB7XG4gIGNvbnN0IG5ld0NhcmQgPSBuZXcgQ2FyZChjYXJkRGF0YSwgXCIjY2FyZC10ZW1wbGF0ZVwiLCAoKSA9PiB7XG4gICAgaW1hZ2VQcmV2aWV3TW9kYWwub3BlbihjYXJkRGF0YSk7XG4gIH0pO1xuICByZXR1cm4gbmV3Q2FyZC5nZW5lcmF0ZUNhcmQoKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQoaW5wdXRWYWx1ZXMpIHtcbiAgY29uc29sZS5sb2coaW5wdXRWYWx1ZXMubmFtZSk7XG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcbiAgICBuYW1lSW5wdXQ6IGlucHV0VmFsdWVzLm5hbWUsXG4gICAgam9iSW5wdXQ6IGlucHV0VmFsdWVzLmpvYixcbiAgfSk7XG4gIHByb2ZpbGVNb2RhbC5jbG9zZSgpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVBZGRDYXJkRm9ybVN1Ym1pdChpbnB1dFZhbHVlcykge1xuICBjb25zdCBuYW1lID0gaW5wdXRWYWx1ZXMudGl0bGU7XG4gIGNvbnN0IGxpbmsgPSBpbnB1dFZhbHVlcy51cmw7XG4gIGNvbnN0IGNhcmREYXRhID0geyBuYW1lLCBsaW5rIH07XG5cbiAgY2FyZHNTZWN0aW9uLnByZXBlbmRJdGVtKGNyZWF0ZUNhcmQoY2FyZERhdGEpKTtcbiAgY2FyZE1vZGFsLmNsb3NlKCk7XG4gIGNhcmRNb2RhbC5tb2RhbEZvcm0ucmVzZXQoKTtcbn1cbiIsIi8vYWRkcyBlbGVtZW50cyB0byB0aGUgRE9NXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFwcGVuZEl0ZW0oaXRlbSkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoaXRlbSk7XG4gIH1cblxuICBwcmVwZW5kSXRlbShpdGVtKSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoaXRlbSk7XG4gIH1cbn1cbiIsImltcG9ydCBNb2RhbCBmcm9tIFwiLi9Nb2RhbC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb2RhbFdpdGhJbWFnZSBleHRlbmRzIE1vZGFsIHtcbiAgY29uc3RydWN0b3IobW9kYWxTZWxlY3Rvcikge1xuICAgIHN1cGVyKHsgbW9kYWxTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9tb2RhbEltYWdlID0gdGhpcy5fbW9kYWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5tb2RhbF9faW1hZ2UtcHJldmlld1wiXG4gICAgKTtcbiAgICB0aGlzLl9tb2RhbEltYWdlU3VidGl0bGUgPSB0aGlzLl9tb2RhbEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLm1vZGFsX19waWN0dXJlLXN1YnRpdGxlXCJcbiAgICApO1xuICB9XG4gIG9wZW4oY2FyZERhdGEpIHtcbiAgICAvL2FjY2VwdCB0aGUgbmFtZSBhbmQgbGluayBvZiB0aGUgY2FyZCBhcyBhcmd1bWVudHMgYW5kIGFkZCBhbiBpbWFnZSB0byB0aGUgcG9wdXAgYW5kIGltYWdlIHNyYyBhdHRyaWJ1dGUgYW5kIGEgY2FwdGlvbiBmb3IgdGhlIGltYWdlLiBjYWxsIHRoaXMgbWV0aG9kIGluIHRoZSBpbWFnZSBjbGljayBoYW5kbGVyIGluIGluZGV4LmpzXG4gICAgdGhpcy5fbW9kYWxJbWFnZS5zcmMgPSBjYXJkRGF0YS5saW5rO1xuICAgIHRoaXMuX21vZGFsSW1hZ2UuYWx0ID0gYFBob3RvIG9mICR7Y2FyZERhdGEubmFtZX1gO1xuICAgIHRoaXMuX21vZGFsSW1hZ2VTdWJ0aXRsZS50ZXh0Q29udGVudCA9IGNhcmREYXRhLm5hbWU7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZUVsZW1lbnRTZWxlY3Rvciwgam9iRWxlbWVudFNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9uYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZUVsZW1lbnRTZWxlY3Rvcik7XG4gICAgdGhpcy5fam9iRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iRWxlbWVudFNlbGVjdG9yKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHRoaXMuX3VzZXJJbmZvID0ge1xuICAgICAgbmFtZTogdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgICBqb2I6IHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgfTtcbiAgICAvL3JldHVybnMgYW4gb2JqZWN0IGNvbnRhaW5pbmcgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHVzZXJcbiAgICByZXR1cm4gdGhpcy5fdXNlckluZm87XG4gIH1cblxuICBzZXRVc2VySW5mbyh7IG5hbWVJbnB1dCwgam9iSW5wdXQgfSkge1xuICAgIHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZUlucHV0O1xuICAgIHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQgPSBqb2JJbnB1dDtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkZvcm1WYWxpZGF0b3IiLCJjb25zdHJ1Y3RvciIsIm9wdGlvbnMiLCJmb3JtRWxlbWVudCIsInRoaXMiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfZm9ybVNlbGVjdG9yIiwiZm9ybVNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm0iLCJfaW5wdXRFbGVtZW50cyIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfc3VibWl0QnV0dG9uIiwicXVlcnlTZWxlY3RvciIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZUVsZW1lbnQiLCJpZCIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJyZW1vdmUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsInJlc2V0VmFsaWRhdGlvbiIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImZvckVhY2giLCJfZGlzYWJsZUJ1dHRvbiIsImRpc2FibGVkIiwiX2hhc0ludmFsaWRJbnB1dCIsImV2ZXJ5IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiZW5hYmxlVmFsaWRhdGlvbiIsIkNhcmQiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsIl9uYW1lIiwibmFtZSIsIl9pbWFnZSIsImxpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfY2FyZEltYWdlIiwiX2xpa2VCdXR0b24iLCJ0b2dnbGUiLCJfZGVsZXRlQnV0dG9uIiwiX2VsZW1lbnQiLCJnZW5lcmF0ZUNhcmQiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfY2FyZFRpdGxlIiwic3JjIiwiYWx0IiwiTW9kYWwiLCJfcmVmIiwibW9kYWxTZWxlY3RvciIsIl9tb2RhbEVsZW1lbnQiLCJfY2xvc2VCdXR0b24iLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwib3BlbiIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsIl9jbG9zZU1vZGFsT3ZlcmxheSIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJzZXRFdmVudExpc3RlbmVycyIsIk1vZGFsV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJtb2RhbEZvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0VmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsInByb2ZpbGVGb3JtRWxlbWVudCIsImZvcm1zIiwiYWRkQ2FyZEZvcm1FbGVtZW50IiwicHJvZmlsZUVkaXRCdXR0b24iLCJhZGROZXdDYXJkQnV0dG9uIiwibmFtZUlucHV0Iiwiam9iSW5wdXQiLCJwcm9maWxlRm9ybVZhbGlkYXRvciIsImNhcmRzU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9yZW5kZXJlZEl0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImFwcGVuZEl0ZW0iLCJhcHBlbmQiLCJwcmVwZW5kSXRlbSIsInByZXBlbmQiLCJjYXJkRGF0YSIsImNyZWF0ZUNhcmQiLCJwcm9maWxlTW9kYWwiLCJjb25zb2xlIiwibG9nIiwidXNlckluZm8iLCJzZXRVc2VySW5mbyIsImpvYiIsImNhcmRNb2RhbCIsInRpdGxlIiwidXJsIiwicmVzZXQiLCJpbWFnZVByZXZpZXdNb2RhbCIsIl9tb2RhbEltYWdlIiwiX21vZGFsSW1hZ2VTdWJ0aXRsZSIsIm5hbWVFbGVtZW50U2VsZWN0b3IiLCJqb2JFbGVtZW50U2VsZWN0b3IiLCJfbmFtZUVsZW1lbnQiLCJfam9iRWxlbWVudCIsImdldFVzZXJJbmZvIiwiX3VzZXJJbmZvIiwiX3JlZjIiLCJjdXJyZW50VXNlciJdLCJzb3VyY2VSb290IjoiIn0=